<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-GB" xml:lang="en-GB" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Dataset release checklist</title>
    <link rel="icon" href="https://universaldependencies.org/logos/logo-ud.png" type="image/png">
    <link rel="root" href=""/> <!-- for JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../css/jquery-ui-redmond.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../css/style-vis.css"/>
    <link rel="stylesheet" type="text/css" href="../css/hint.css"/>
    <script type="text/javascript" src="../lib/ext/head.load.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.min.js"></script>
    <script>document.addEventListener("DOMContentLoaded", function(event) {anchors.add();});</script>
    <!-- Set up this custom Google search at https://cse.google.com/cse/business/settings?cx=001145188882102106025:dl1mehhcgbo -->
    <!-- DZ 2021-01-22: I am temporarily hiding the search field to find out whether it slows down loading of the title page.
    <script>
      (function() {
        var cx = '001145188882102106025:dl1mehhcgbo';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script> -->
<!--     <link rel="shortcut icon" href="favicon.ico"/> -->


  </head>
  <body>
    <div id="main" class="center">

      <div id="hp-header">
        <table width="100%"><tr><td width="50%">
          <span class="header-text"><a href="http://universaldependencies.org/#language-">home</a></span>

          <span class="header-text"><a href="https://github.com/universaldependencies/docs/edit/pages-source/contributing/release_checklist.md" target="#">edit page</a></span>
          <span class="header-text"><a href="https://github.com/universaldependencies/docs/issues">issue tracker</a></span>
        </td><td>
          <gcse:search></gcse:search>
        </td></tr></table>
      </div>

      <hr/>

      
      <div class="v2complete">
        This page pertains to UD version 2.
      </div>
      

      <div id="content">
        <noscript>
          <div id="noscript">
            It appears that you have Javascript disabled.
            Please consider enabling Javascript for this page to see the visualizations.
          </div>
        </noscript>

        <!-- The content may include scripts and styles, hence we must load the shared libraries before the content. -->
        <script type="text/javascript">
            console.time('loading libraries');
            var root = '../'; // filled in by jekyll
            head.js(
                // External libraries
                // DZ: Copied from embedding.html. I don't know which one is needed for what, so I'm currently keeping them all.
                root + 'lib/ext/jquery.min.js',
                root + 'lib/ext/jquery.svg.min.js',
                root + 'lib/ext/jquery.svgdom.min.js',
                root + 'lib/ext/jquery.timeago.js',
                root + 'lib/ext/jquery-ui.min.js',
                root + 'lib/ext/waypoints.min.js',
                root + 'lib/ext/jquery.address.min.js'
            );
        </script>
        <h1 id="release-checklist">Release checklist</h1>

<p>This checklist is meant to provide guidance for teams contributing treebank data for a new release of Universal Dependencies.
It was created for release v1.2 and applies, unless otherwise noted, to any upcoming release.</p>

<p>Contents:</p>

<ul>
  <li><a href="#new-language-or-treebank">New language or treebank</a></li>
  <li><a href="#executive-summary">Executive summary</a></li>
  <li><a href="#repository-and-files">Repository and files</a></li>
  <li><a href="#validation">Validation</a></li>
  <li><a href="#fixing-errors-in-treebanks">Fixing errors in treebanks</a></li>
  <li><a href="#language-specific-guidelines">Language-specific guidelines</a></li>
</ul>

<h1 id="new-language-or-treebank">New language or treebank</h1>

<p>See <a href="/contributing/adding_language_treebank.html">Adding new language or treebank to UD</a>.</p>

<h1 id="executive-summary">Executive summary</h1>

<ul>
  <li>Make sure <a href="#repository-and-files">your repository has the right files</a>, <a href="#treebank-metadata">correct metadata</a> in the README, and data being prepared for the next release <a href="#repository-branches">lives on the <code class="language-plaintext highlighter-rouge">dev</code> branch</a>.</li>
  <li>Make sure your data and repository pass the <a href="#validation">format and content validation</a>: <a href="https://quest.ms.mff.cuni.cz/udvalidator/cgi-bin/unidep/validation-report.pl">direct link</a> to the validator output.</li>
</ul>

<h1 id="repository-and-files">Repository and files</h1>

<p>See <a href="/contributing/repository_files.html">Repository and files</a></p>

<h1 id="validation">Validation</h1>

<p>Up-to-date automatic validation runs of the repositories are available
<a href="http://quest.ms.mff.cuni.cz/udvalidator/">here</a>. Depending on the size of the treebank, the report
will be updated within one to twenty minutes after pushing changes to Github. The report is based
on the <code class="language-plaintext highlighter-rouge">dev</code> branch of the data and combines the output of two scripts: <code class="language-plaintext highlighter-rouge">check_files.pl</code> and
<code class="language-plaintext highlighter-rouge">validate.py</code>. The former checks whether the treebank repository contains the expected files,
whether the metadata in <code class="language-plaintext highlighter-rouge">README</code> look good and whether the language-specific documentation exists
in the <code class="language-plaintext highlighter-rouge">docs</code> repository. The latter checks the actual contents of the CoNLL-U files within the
treebank. This is the official UD validator, described in more detail below. You may want to
download <code class="language-plaintext highlighter-rouge">validate.py</code> and check your data locally before uploading them; but even if you do so,
always check the on-line validation report after uploading any changes to your repository. If you
run your local validator with wrong configuration (or if you do not have the latest version of the
validator), you may be led to think that your treebank is in good shape, while the fact is that the
server will reject it.</p>

<p>See a separate page on <a href="/contributing/validation-rules.html">validation rules</a>, which explains the various
validation levels, as well as the consequences of your treebank’s not being valid at release time.</p>

<p>The validation script is available in the <a href="https://github.com/UniversalDependencies/tools">tools</a>
repository and you can use it to test your data locally before you upload them to Github. Make sure
that you always have the latest update of the tools repository.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone git@github.com:UniversalDependencies/tools.git
$ cd tools
$ python validate.py -h
</code></pre></div></div>

<p>Note that you need Python 3 to run the validator, and you need a third-party
Python module called <code class="language-plaintext highlighter-rouge">regex</code> installed via pip, so when needed try this before
invoking the validator:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ sudo apt-get install python3-pip; python3 -m pip install regex
</code></pre></div></div>

<p>See also the <a href="https://github.com/UniversalDependencies/tools/blob/master/README.md">README file</a>
in the tools repository.</p>

<p>In general, you validate the data like so:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python validate.py --lang=xx --max-err=0 [file.conllu]
</code></pre></div></div>

<p>for example for Finnish:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python validate.py --lang=fi --max-err=0 ../UD_Finnish-TDT/fi_tdt-ud-dev.conllu
*** PASSED ***
</code></pre></div></div>

<p>Among other items, the script also validates the language-specific set
of morphological features and relations and therefore it needs to know about these.
Until release 2.7, language-specific lists were stored in the <code class="language-plaintext highlighter-rouge">data</code> folder in the <code class="language-plaintext highlighter-rouge">tools</code>
repository and they could be edited directly by users working on individual languages. This
practice is now deprecated. The <code class="language-plaintext highlighter-rouge">data</code> folder will contain necessary information in JSON files
that cannot be edited directly. Instead, language-specific labels will be registered through
a web interface and the data in the <code class="language-plaintext highlighter-rouge">tools</code> repository will be automatically updated when a change
is saved in the web interface.</p>

<p>At present, morphological features can be registered
<a href="https://quest.ms.mff.cuni.cz/udvalidator/cgi-bin/unidep/langspec/specify_feature.pl">here</a>,
dependency relations for basic trees
<a href="https://quest.ms.mff.cuni.cz/udvalidator/cgi-bin/unidep/langspec/specify_deprel.pl">here</a> and
case markers for enhanced relations
<a href="https://quest.ms.mff.cuni.cz/udvalidator/cgi-bin/unidep/langspec/specify_edeprel.pl">here</a>.</p>

<p>It is possible to register language-specific features and relations only if they
<a href="/contributing/contributing_language_specific.html">have been properly documented</a>. If a feature or relation does not have
its own documentation page in the <code class="language-plaintext highlighter-rouge">docs</code> repository (either as part of the universal guidelines
or in the language-specific folder), or if the page is not in the prescribed (machine-recognizable)
format, the web interface will not allow to register the feature or relation as valid, and consequently, the
validator will not accept it in the data.</p>

<p>Since the <code class="language-plaintext highlighter-rouge">v2.0</code> release, whitespace is allowed in the <code class="language-plaintext highlighter-rouge">FORM</code> and <code class="language-plaintext highlighter-rouge">LEMMA</code> fields under conditions
specified <a href="v2/segmentation.html">here</a>. This is supported in the validator through the UD-wide
file <code class="language-plaintext highlighter-rouge">data/tokens_w_space.ud</code> and its language-specific variants <code class="language-plaintext highlighter-rouge">data/tokens_w_space.xx</code>. In
these files, each line is a <a href="https://docs.python.org/3/library/re.html">Python regular expression</a>
defining the permissible forms and lemmas that can contain a whitespace.</p>

<p>The validator also checks that certain closed classes (currently auxiliaries and copula) appear
only with documented lemmas. Since release 2.7, auxiliaries can be <a href="https://quest.ms.mff.cuni.cz/udvalidator/cgi-bin/unidep/langspec/specify_auxiliary.pl">defined at the on-line validation
site</a>.
When adding an auxiliary (or the copula), the user can see some relevant points from the UD
guidelines, as well as the list of auxiliaries that have been defined in other languages
(related languages are shown first). This is to improve cross-lingual parallelism and to reduce
the danger that maintainers of neighboring languages will employ dramatically different interpretations
of the guidelines and end up with divergent notions of what qualifies as an auxiliary.
All auxiliaries must be explained and accompanied by an example; in the future, the information
collected this way could be propagated to the UD documentation. The site initially includes some
auxiliaries that were previously listed (but not documented) in the source code of the validator.
The user has to provide the missing information for all existing auxiliaries before they can add
new ones.</p>

<p>When validating language-specific lists of morphological features, auxiliary verbs etc., the validator
can temporarily switch to a language different from the main language of the file. This is useful
in cases of code-switching, i.e., when a foreign language phrase is inserted in the text, and the
annotators decided to annotate it according to the foreign language guidelines (instead of simply
tagging everything as <code class="language-plaintext highlighter-rouge">X</code> and connecting it as a <code class="language-plaintext highlighter-rouge">flat</code> structure). The alternative language is
signaled for individual tokens using the <code class="language-plaintext highlighter-rouge">Lang</code> attribute in the MISC column. Its value is the ISO
639 language code, as registered for the language in UD (either two letters from ISO 639-1, or
three letters from ISO 639-3, lowercased!)</p>

<p>Some additional tests are available in the
<a href="https://github.com/udapi/udapi-python/blob/master/udapi/block/ud/markbugs.py">Udapi</a>
tool. They may reveal configurations that are not necessarily invalid but are suspicious and should be checked manually.</p>

<h1 id="fixing-errors-in-treebanks">Fixing errors in treebanks</h1>

<p>Previously released treebanks are not always perfect and they may contain inconsistencies or errors.
In some cases new tests are implemented in the official validator and new errors are discovered in
previously valid treebanks. Other errors or inconsistencies cannot be detected by the validator but
they can be spotted and reported by human users.</p>

<p>It is primarily the responsibility of the data providers (or of current treebank maintainers, if
the treebank was adopted by a new team) to fix these errors. However, we want to encourage contributions
from non-maintainers of a treebank in the form of pull requests. Such pull requests must be based on
the previous contents of the dev branch (not the master branch, as it may contain files that would
render the dev branch invalid!) and they must be directed again at the dev branch (never the master
branch). Submitting a pull request does not automatically mean that the treebank maintainer must
accept it (in particular, some treebanks are maintained outside UD and then automatically converted
to UD), but the maintainers should respond to the request, and if they do not accept and merge it,
other possible solutions should be discussed.</p>

<p>We expect that the treebank maintainers would consider such requests within 6 months. If no response
is received from maintainers, the UD infrastructure maintainers have the authority to assume
responsibility for reviewing and accepting the pull request.</p>

<h1 id="language-specific-guidelines">Language-specific guidelines</h1>

<p>Every language should have a set of language-specific guidelines at <a href="http://universaldependencies.org/">http://universaldependencies.org/</a>.
If there are multiple UD treebanks in one language, all should follow the same language-specific
guidelines. It is common responsibility of the teams providing the treebanks to also provide the
language-specific documentation.</p>

<p>There are <a href="/contributing/contributing_language_specific.html">guidelines specifying the requirements on
language-specific documentation.</a> Also see the general guidelines about
<a href="/contributing/editing.html">how to contribute</a> (which covers the conventions used in writing UD
documentation, such as how to format examples).</p>

      </div>

<!-- support for embedded visualizations -->
<script type="text/javascript">
    var root = '../'; // filled in by jekyll
    head.js(
        // We assume that external libraries such as jquery.min.js have already been loaded outside!
        // (See _layouts/base.html.)

        // brat helper modules
        root + 'lib/brat/configuration.js',
        root + 'lib/brat/util.js',
        root + 'lib/brat/annotation_log.js',
        root + 'lib/ext/webfont.js',
        // brat modules
        root + 'lib/brat/dispatcher.js',
        root + 'lib/brat/url_monitor.js',
        root + 'lib/brat/visualizer.js',

        // embedding configuration
        root + 'lib/local/config.js',
        // project-specific collection data
        root + 'lib/local/collections.js',

        // Annodoc
        root + 'lib/annodoc/annodoc.js',

        // NOTE: non-local libraries
        'https://spyysalo.github.io/conllu.js/conllu.js'
    );

    var webFontURLs = [
//        root + 'static/fonts/Astloch-Bold.ttf',
        root + 'static/fonts/PT_Sans-Caption-Web-Regular.ttf',
        root + 'static/fonts/Liberation_Sans-Regular.ttf'
    ];

    var setupTimeago = function() {
        jQuery("time.timeago").timeago();
    };

    head.ready(function() {
        setupTimeago();

        // mark current collection (filled in by Jekyll)
        Collections.listing['_current'] = '';

	// perform all embedding and support functions
	Annodoc.activate(Config.bratCollData, Collections.listing);
    });
</script>


<!-- google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55233688-1', 'auto');
  ga('send', 'pageview');

</script>


      <div id="footer">
          <p class="footer-text">&copy; 2014–2024
            <a href="http://universaldependencies.org/introduction.html#contributors" style="color:gray">Universal Dependencies contributors</a>.
            Site powered by <a href="http://spyysalo.github.io/annodoc" style="color:gray">Annodoc</a> and <a href="http://brat.nlplab.org/" style="color:gray">brat</a></p>.
      </div>
    </div>
  </body>
</html>
